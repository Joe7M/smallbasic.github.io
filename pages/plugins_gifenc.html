<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SmallBASIC | plugins_gifenc</title>
  <meta name="description" content="SmallBASIC | One more basic">
  <link rel="canonical" href="/plugins_gifenc.html">
  <link rel="keywords" href="plugins_gifenc">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="icon" type="image/png" href="/images/sb-desktop-32x32.png">
  <script src="/clipboard.js"></script>
</head>
  <body>
<div class="wrapAll clearfix">
  <div class="sidebar">
    <div class="logo">
      <a href="/"><img src='/images/sb-desktop-128x128.png' alt="logo"></a>
    </div>
    <div class="navigation">
      <h4>SmallBASIC</h4>
      <ul>
        <li><a href="/">Main page</a></li>
        <li><a href="/pages/download.html">Download</a></li>
        <li><a href="/pages/reference.html">Language reference</a></li>
        <li><a href="/pages/samples.html">Code library</a></li>
      </ul>
      <hr class="menuSeparator"/>
      <ul>
        <li><a href="/pages/news.html">News</a></li>
        <li><a href="/pages/articles.html">Articles</a></li>
        <li><a href="/pages/community.html">Community</a></li>
        <li><a href="/pages/changelog.html">Changelog</a></li>
        <li><a href="/pages/screenshots.html">Screenshots</a></li>
        <li><a href="/pages/links.html">Links</a></li>
      </ul>
    </div>
  </div>
  <div class="mainsection">
    <div class="tabs clearfix">
      <div class="tabsLeft">
        <ul>
          <li><a href="#" class="active">Article</a></li>
          <li><a href="https://www.syntaxbomb.com/smallbasic">Discuss</a></li>
        </ul>
      </div>
      <div id="simpleSearch">
        <form action="https://github.com/smallbasic/smallbasic.github.io/search"
              target="_github" accept-charset="UTF-8" method="get" style="display:inline">
          <div id="submitSearch">
            <button type="submit">&nbsp;</button>
            <input type="hidden" class="js-site-search-type-field" name="type">
            <input type="hidden" name="utf8" value="âœ“">
            <input type="hidden" name="l" value="Visual Basic">
            <input type="text" name="q" placeholder="Search" id="searchInput">
          </div>
        </form>
      </div>
      <div class="tabsRight">
        <ul>
          <li><a target="_github" href="https://github.com/smallbasic/smallbasic.github.io/blob/master/_build/pages/plugins_gifenc.markdown">View source</a></li>
          <li><a target="_github" href="https://github.com/smallbasic/smallbasic.github.io/commits/master/_build/pages/plugins_gifenc.markdown">View history</a></li>
        </ul>
      </div>
    </div>
<div class="article">
<h1 id="gifenc---create-animated-gif-images">Gifenc - Create animated
gif images</h1>
<h2 id="about-the-plugin">About the plugin</h2>
<p>Gifenc lets you create simple animated gif images. It is based on a c
library created by lecram. See Github <a
href="https://github.com/lecram/gifenc/tree/87acd487dfa2f2a638eec751a1d6c2fff60822da">gifenc</a></p>
<h2 id="using-the-plugin">Using the plugin</h2>
<p>The plugin can be used by importing it with
<code>import gifenc</code>. A simple program creating a moving stripe
pattern with 8 frames looks like this:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode smallbasic"><code class="sourceCode smallbasic"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">import</span> gifenc <span class="kw">as</span> ge</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> w = <span class="dv">120</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> h = <span class="dv">90</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> palette = [<span class="dv">0x00</span>, <span class="dv">0x66</span>, <span class="dv">0x00</span>, &amp; <span class="co">&#39; 0 -&gt; black</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0xFF</span>, <span class="dv">0x00</span>, <span class="dv">0x00</span>, &amp; <span class="co">&#39; 1 -&gt; red</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0x22</span>, <span class="dv">0xFF</span>, <span class="dv">0x00</span>, &amp; <span class="co">&#39; 2 -&gt; green</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0x00</span>, <span class="dv">0x00</span>, <span class="dv">0xFF</span>]   <span class="co">&#39; 3 -&gt; blue</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> bgIndex = -<span class="dv">1</span> <span class="co">&#39; none</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> loopCount = <span class="dv">0</span> <span class="co">&#39; infinity</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="fu">delay</span> = <span class="dv">10</span> <span class="co">&#39; in 1/100 s</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> gif = ge.create(<span class="st">&quot;example.gif&quot;</span>, w, h, palette, bgIndex, loopCount)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="kw">for </span>i = <span class="dv">0</span> <span class="kw">to</span> <span class="dv">8</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  frame = []</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">for </span>j = <span class="dv">0</span> <span class="kw">to</span> w * h</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    frame &lt;&lt; (i * <span class="dv">3</span> + j) / <span class="dv">6</span> % <span class="dv">4</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">next </span>j</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  ge.add_frame(gif, <span class="fu">delay</span>, frame)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="kw">next </span>i</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>ge.<span class="fu">close</span>(gif)</span></code></pre></div>
<p><em>w</em> and <em>h</em> contain the width and the height of the
image. <em>palette</em> is an array of colors. Three successive values
represent the red, green and blue component of the color.
<em>bgIndex</em> defines which of the colors in <em>palette</em> should
be set as a background color. If set to -1 the background is
transparent. <em>loopCount</em> defines the number of times the
animation should be repeated. If set to zero, the animations will repeat
endless. The <em>delay</em> parameter specifies how long the frame will
be shown, in hundredths of a second. For example,
<code>delay = 100</code> means one second, and <code>delay = 25</code>
means a quarter of a second. Each frame of the gif is stored in an 1D
array with <em>w</em> times <em>h</em> elements. Every element defines
the color index (from <em>palette</em> ) of the corresponding pixel.</p>
<h2 id="supported-commands">Supported Commands</h2>
<h3 id="create">CREATE</h3>
<blockquote>
<p>gif = create(fileName, w, h, palette, bgIndex, loopCount)</p>
</blockquote>
<p><strong>fileName</strong> (String): file name<br />
<strong>w, h</strong>: width and height of the image in pixel<br />
<strong>palette</strong>: 1D-array containing the colors
<code>[r1,g1,b1, r2,g2,g3, ...]</code><br />
<strong>bgIndex</strong>: index of the background color<br />
<strong>loopCount</strong>: Number of loops of the animation, -1 -&gt;
endless<br />
<strong>gif</strong>: object with ID of the gif image</p>
<p>Creates a gif object and returns the ID.</p>
<h3 id="add_frame">ADD_FRAME</h3>
<blockquote>
<p>add_frame(gif, delay, frame)</p>
</blockquote>
<p><strong>gif</strong>: gif object with ID<br />
<strong>delay</strong>: delay in hundredths of a second<br />
<strong>frame</strong>: 1D-array containing the pixel data</p>
<h3 id="close">CLOSE</h3>
<blockquote>
<p>close(gif)</p>
</blockquote>
<p><strong>gif</strong>: gif object with ID</p>
<p>Closes the gif and writes it to hard drive.</p>
</div>
    <div class="pagefooter">
      This page was last edited on Sat, 9 Sep 2023 22:31:16 +0200
 |
      <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="nofollow">Markdown</a>
      processed with
      <a href="https://pandoc.org/MANUAL.html#pandocs-markdown" target="_blank" rel="nofollow">pandoc 3.1.3</a>
      | Template by <a href="http://html5-templates.com/" target="_blank" rel="nofollow">HTML5 Templates</a>
    </div>
  </div>
</div>
  </body>
</html>
