<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SmallBASIC | plugins_pigpio</title>
  <meta name="description" content="SmallBASIC | One more basic">
  <link rel="canonical" href="/plugins_pigpio.html">
  <link rel="keywords" href="plugins_pigpio">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="icon" type="image/png" href="/images/sb-desktop-32x32.png">
  <script src="/clipboard.js"></script>
</head>
  <body>
<div class="wrapAll clearfix">
  <div class="sidebar">
    <div class="logo">
      <a href="/"><img src='/images/sb-desktop-128x128.png' alt="logo"></a>
    </div>
    <div class="navigation">
      <h4>SmallBASIC</h4>
      <ul>
        <li><a href="/">Main page</a></li>
        <li><a href="/pages/download.html">Download</a></li>
        <li><a href="/pages/reference.html">Language reference</a></li>
        <li><a href="/pages/samples.html">Code library</a></li>
      </ul>
      <hr class="menuSeparator"/>
      <ul>
        <li><a href="/pages/articles.html">Articles</a></li>
        <li><a href="/pages/community.html">Community</a></li>
        <li><a href="/pages/changelog.html">Changelog</a></li>
        <li><a href="/pages/screenshots.html">Screenshots</a></li>
        <li><a href="/pages/links.html">Links</a></li>
      </ul>
    </div>
  </div>
  <div class="mainsection">
    <div class="tabs clearfix">
      <div class="tabsLeft">
        <ul>
          <li><a href="#" class="active">Article</a></li>
          <li><a href="https://www.syntaxbomb.com/smallbasic">Discuss</a></li>
        </ul>
      </div>
      <div id="simpleSearch">
        <form action="https://github.com/smallbasic/smallbasic.github.io/search"
              target="_github" accept-charset="UTF-8" method="get" style="display:inline">
          <div id="submitSearch">
            <button type="submit">&nbsp;</button>
            <input type="hidden" class="js-site-search-type-field" name="type">
            <input type="hidden" name="utf8" value="✓">
            <input type="hidden" name="l" value="Visual Basic">
            <input type="text" name="q" placeholder="Search" id="searchInput">
          </div>
        </form>
      </div>
      <div class="tabsRight">
        <ul>
          <li><a target="_github" href="https://github.com/smallbasic/smallbasic.github.io/blob/master/_build/pages/plugins_pigpio.markdown">View source</a></li>
          <li><a target="_github" href="https://github.com/smallbasic/smallbasic.github.io/commits/master/_build/pages/plugins_pigpio.markdown">View history</a></li>
        </ul>
      </div>
    </div>
<div class="article">
<h1 id="smallbasic-pigpio---plugin-to-use-the-gpio-pins-of-a-raspberry-pi">SmallBASIC-PiGPIO - Plugin to use the GPIO pins of a Raspberry Pi</h1>
<figure>
<img src="https://joe7m.github.io/SmallBasicPIGPIO/images/logo_smallbasicpigpio.png" alt="" /><figcaption>Logo</figcaption>
</figure>
<p>SmallBASIC-PiGPIO is a plugin for SmallBASIC to use the GPIO connector of a Raspberry Pi. The following article will give you a short introduction to the plugin. Detailed information is available on the <a href="https://joe7m.github.io/SmallBasicPIGPIO">project website</a></p>
<h2 id="blinking-led">Blinking LED</h2>
<p>In this example we will connect a LED to the Raspberry Pi and let it blink with a short SmallBASIC program.</p>
<h3 id="wiring">Wiring</h3>
<p>The wiring of the LED is shown in the following image</p>
<figure>
<img src="https://joe7m.github.io/SmallBasicPIGPIO/images/LED_wiring.png" alt="" /><figcaption>LED wiring</figcaption>
</figure>
<p>Depending on the type of the LED you need a certain resistor. When using the LED without a resistor, you will destroy the LED and maybe even parts of your Raspberry Pi. If you want to see your LED blinking without studying to much and you don’t expect maximum brightness, then go for a resistor with 220 Ohms or even (saver) 1000 Ohms.</p>
<p>Connect the resistor to pin 4 and the LED to ground of the Raspberry Pi.</p>
<h3 id="software">Software</h3>
<p>To let the LED blink the following SmallBASIC program can be used.</p>
<pre class="freebasic"><code>import SmallBasicPIGPIO as gpio

&#39; LED is connected to pin GPIO4
const PIN_GPIO4 = 4

&#39; Set pin as an output
gpio.GPIO_SetOutput(PIN_GPIO4)

for ii = 1 to 5
    print(ii)
    &#39;Set GPIO pin to high -&gt; 3.3V
    gpio.GPIO_Write(PIN_GPIO4, 1)
    delay(500)
    &#39;Set GPIO pin to low -&gt; ground
    gpio.GPIO_Write(PIN_GPIO4, 0)
    delay(500)
next</code></pre>
<p>The plugin supports Pulse Width Modulation (PWM). Using this technique the intensity of the LED can tuned as shown in the next example.</p>
<pre class="freebasic"><code>import SmallBasicPIGPIO as gpio

&#39; LED is connected to pin GPIO4
const PIN_GPIO4 = 4

&#39; Set pin as an output
gpio.GPIO_SetOutput(PIN_GPIO4)

&#39; Duty cycle is a value between 0 and 255.
&#39; 0 -&gt; LED is off
&#39; 128 -&gt; LED half brightness
&#39; 255 -&gt; LED max. brightness

for DutyCycle = 0 to 255 step 20
    print(DutyCycle)
    gpio.GPIO_Pwm(PIN_GPIO4, DutyCycle)
    delay(200)
next</code></pre>
<h2 id="push-buttons">Push Buttons</h2>
<p>Reading the state of a push button is for many Raspberry Pi project important and really easy with SmallBASIC PiGPIO.</p>
<h3 id="wiring-1">Wiring</h3>
<p>In the following image you see the wiring of a push button. When you press the button, the circuit will be closed, otherwise the circuit is open. The button is connected to pin 4 and ground of the Raspberry Pi. An internal pullup resistor will be enabled automatically.</p>
<figure>
<img src="https://joe7m.github.io/SmallBasicPIGPIO/images/PushButton_wiring.png" alt="" /><figcaption>Button wiring</figcaption>
</figure>
<h3 id="software-1">Software</h3>
<p>To read the state of the button, the following example program can be used.</p>
<pre class="freebasic"><code>import SmallBasicPIGPIO as gpio

const PIN_GPIO4 = 4

&#39; Set GPIO pin 4 to INPUT. When a pin is set to input,
&#39; the internal pullup resistor will be enabled automaticly
gpio.GPIO_SetInput(PIN_GPIO4)

repeat 
    key = inkey()
    
    &#39; Read the state of the pin. It will return 0 or 1.
    status = gpio.GPIO_Read(PIN_GPIO4)
    locate 1,1: print(status)
    
    showpage()
    delay(50)   
    
until key &lt;&gt; &quot;&quot;</code></pre>
<h2 id="oled-display">OLED Display</h2>
<p>In case the Raspberry Pi is used without a big screen, it would be great to have a small display to print information or even show nice graphics. The plugin supports SSD1306 compatible OLED displays (quite common and really cheap).</p>
<h3 id="wiring-2">Wiring</h3>
<p>For running this example, you need a SSD1306 compatible OLED display. OLEDs with 128x64 or 128x32 pixels are supported. SmallBASIC-PiGPIO is using the I2C-protocol for communication.</p>
<figure>
<img src="https://joe7m.github.io/SmallBasicPIGPIO/images/ssd1306_wiring.png" alt="" /><figcaption>OLED wiring</figcaption>
</figure>
<h3 id="software-2">Software</h3>
<p>The following example shows how to use basic graphic commands to draw lines or print text.</p>
<pre class="freebasic"><code>import SmallBasicPIGPIO as gpio

gpio.OLED1_Open()

gpio.OLED1_SetBrightness(128)

gpio.OLED1_Cls()

gpio.OLED1_Pset(10,0)
gpio.OLED1_Line(0,0,127,63)
gpio.OLED1_RoundRect(54,26,74,38,5)
gpio.OLED1_Circle(118,10,5,1,1) &#39;Filled with white
gpio.OLED1_Triangle(118,30, 113,45, 123,45, 1, 1) &#39;Filled with white

gpio.OLED1_At(0,56)
gpio.OLED1_SetTextSize(16)
gpio.OLED1_Print(&quot;SmallBASIC&quot;)

delay(2000)
gpio.OLED1_Close()

print(&quot;Done&quot;)</code></pre>
<h1 id="supported-hardware">Supported Hardware</h1>
<p>The SmallBASIC-PiGPIO plugin supports the following hardware. Support for more sensors and displays is planned.</p>
<ul>
<li>LED</li>
<li>Push Button</li>
<li>DS18B20 Temperature Sensor</li>
<li>HD44780 Text LCD Display</li>
<li>SSD1306 OLED Display</li>
<li>BH1750 Ambient Light Sensor</li>
<li>ADS1015 and ADS1115 Voltage Sensor</li>
<li>SCD30 CO2, Temperature and Humidity Sensor</li>
</ul>
<h1 id="links">Links</h1>
<ul>
<li><a href="https://joe7m.github.io/SmallBasicPIGPIO/">SmallBASIC PiGPIO project website</a></li>
<li><a href="https://github.com/Joe7M/SmallBasicPIGPIO">Github repository</a></li>
<li><a href="https://github.com/Joe7M/SmallBasicPIGPIO/discussions">Feedback and discussion</a></li>
<li><a href="https://smallbasic.github.io/">SmallBASIC website</a></li>
<li><a href="https://www.syntaxbomb.com/smallbasic/">SmallBASIC forum</a></li>
</ul>
</div>
    <div class="pagefooter">
      This page was last edited on Sun, 6 Nov 2022 14:46:07 +0100
 |
      <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="nofollow">Markdown</a>
      processed with
      <a href="https://pandoc.org/MANUAL.html#pandocs-markdown" target="_blank" rel="nofollow">pandoc 2.9.2.1</a>
      | Template by <a href="http://html5-templates.com/" target="_blank" rel="nofollow">HTML5 Templates</a>
    </div>
  </div>
</div>
  </body>
</html>
